{% extends 'nurvey/base.html' %}
{% load staticfiles %}

{% block js %}
	<script src="{% static 'create/js/create.js'%}"></script>
	<script src="{% static 'nurvey/js/feed.js' %}"></script>
	<script src="{% static 'nurvey/js/app.js' %}"></script>
{% endblock js %}


{% block ng-app %}nurveyApp{% endblock %}
{% block body %}

{% verbatim %}

<!-- NAVBAR -->
<nav class='navbar navbar-default navbar-static-top' role='navigation' ng-controller='NavbarController as navbar'>
	<div class='container'>
		<div class='navbar-header'>
			<a class='navbar-brand' href='#'>———</a>
		</div>
		<div id='navbar-main' class='navbar-collapse collapse'>
			<ul class='nav navbar-nav'>
			</ul>
			<ul class='nav navbar-nav navbar-right'>
				<li>
					<a href='#/'>
						<span class='text'>EXPLORE</span>
						<span class='glyphicon glyphicon-globe'></span>
					</a>
				</li>
				<li>
					<a href='#/feed'>
						<span class='text'>VIEW</span>
						<span class='glyphicon glyphicon-eye-open'></span>
					</a>
				</li>
				<li>
					<a href='#/create'>
						<span class='text'>CREATE</span>
						<span class='glyphicon glyphicon-plus'></span>
					</a>
				</li>

				<!-- New username system with pure ajax -->
				<!-- Server api needs to return empty string when user is not signed in -->
				<!-- Not yet implemented -->
				<!--
				<li ng-switch='navbar.username'>
					<a ng-switch-when='true' href='#/acount'></a>
					<a ng-switch-default data-toggle='modal' data-target='#login-modal'>LOGIN</a>
				</li>
				-->

{% endverbatim %}



				{% if user.is_authenticated %}
				<li>
					<a class='username' href='#/account'>
						<span class='text'>{{ user.username|upper }}</span>
						<span class='glyphicon glyphicon-user'></span>
					</a>
				</li>
				{% else %}
				<li>
					<a href data-toggle='modal' data-target='#login-modal'>
						<span class='text'>LOGIN</span>
						<span class='glyphicon glyphicon-user'></span>
					</a>
				</li>
				{% endif %}
			</ul>
		</div>
	</div>
</nav>



<!-- LOGIN MODAL -->
<div id='login-modal' class='modal fade' tabindex='-1' role='dialog' ng-controller='LoginController as login'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header'>
				LOG IN
			</div>
			<div class='modal-body'>
				<div style='width: 100%' class='container'>
					<div class='row'>
						<label>
							Username
							<input ng-model='credentials.username' type='text' class='form-control' required novalidate></input>
						</label>
					</div>
					<div class='row'>
						<label>
							Password
							<input ng-model='credentials.password' type='password' class='form-control' required novalidate></input>
						</label>
					</div>
					<div class='row'>
						<label>
							Email
							<input ng-model='credentials.email' type='email' class='form-control' required novalidate></input>
						</label>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary" ng-click='login.login()'>Login</button>
				<button type="button" class="btn btn-primary" ng-click='login.register()'>Register</button>
			</div>
		</div>
	</div>
</div>

{% verbatim %}

<div ng-view></div>

{% endverbatim %}
{% endblock %}


